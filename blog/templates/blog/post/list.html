{% extends "blog/base.html" %}
{% block title %} My Blog {% endblock %}

{% block content%}


<div class="row mx-0 px-3">
    <div class="col-md-8 col-sm-12 p-3">
        <div class="bg-white p-4 rounded shadow-sm">  
            <h1>My Blog</h1>
            {% if tag %}
            <h2>Posts tagged with "{{ tag.name }}"</h2>
            {% endif %}
            {% for post in posts%}
            <h2>
                <a href="{{post.get_absolute_url}}">{{post.title}}</a>
            </h2>

            {% comment %} For tags {% endcomment %}
            <p class="tags">Tags: {% for tag in post.tags.all %}
                <a href='{% url "blog:post_list_by_tag" tag.slug %}'>{{ tag.name }}</a>
                {% if not forloop.last %}, {% endif %}
                {% endfor %}
            </p>

            {% comment %} Display publish date and author under title {% endcomment %}
            <p class="date">Published {{ post.publish}} by {{post.author}}</p>

            {% comment %} Display first 30 words {% endcomment %}
            {{ post.body|truncatewords:30|linebreaks}}
            {% endfor %}

            {% comment %} Include pagination {% endcomment %}
            {% include "pagination.html" with page=posts %}
        </div>
    </div>
    <div class="col-md-4 col-sm-12 p-3">
        <div class="bg-white rounded p-3 pb-5">
            <form class="d-flex" role="search">
                <input class="form-control mb-4" type="search" placeholder="Search" aria-label="Search"/>
            </form>

            <!-- Recent Posts -->
            {% include "blog/post/includes/recent_posts.html" %}
        </div>
    </div>
</div>

{% endblock %}